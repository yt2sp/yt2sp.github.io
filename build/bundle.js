var app=function(){"use strict";function t(){}function e(t){return t()}function n(){return Object.create(null)}function l(t){t.forEach(e)}function c(t){return"function"==typeof t}function o(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function i(t,e){t.appendChild(e)}function r(t,e,n){t.insertBefore(e,n||null)}function s(t){t.parentNode.removeChild(t)}function u(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function a(t){return document.createElement(t)}function d(t){return document.createTextNode(t)}function f(){return d(" ")}function p(){return d("")}function g(t,e,n,l){return t.addEventListener(e,n,l),()=>t.removeEventListener(e,n,l)}function h(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function m(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function y(t,e){t.value=null==e?"":e}function v(t,e,n,l){t.style.setProperty(e,n,l?"important":"")}function b(t,e){for(let n=0;n<t.options.length;n+=1){const l=t.options[n];if(l.__value===e)return void(l.selected=!0)}}function k(t){const e=t.querySelector(":checked")||t.options[0];return e&&e.__value}let w;function x(t){w=t}function _(){if(!w)throw new Error("Function called outside component initialization");return w}const $=[],S=[],C=[],q=[],T=Promise.resolve();let E=!1;function I(t){C.push(t)}let j=!1;const N=new Set;function P(){if(!j){j=!0;do{for(let t=0;t<$.length;t+=1){const e=$[t];x(e),D(e.$$)}for($.length=0;S.length;)S.pop()();for(let t=0;t<C.length;t+=1){const e=C[t];N.has(e)||(N.add(e),e())}C.length=0}while($.length);for(;q.length;)q.pop()();E=!1,j=!1,N.clear()}}function D(t){if(null!==t.fragment){t.update(),l(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(I)}}const O=new Set;let Y;function A(t,e){t&&t.i&&(O.delete(t),t.i(e))}function L(t,e){const n=e.token={};function c(t,c,o,i){if(e.token!==n)return;e.resolved=i;let r=e.ctx;void 0!==o&&(r=r.slice(),r[o]=i);const s=t&&(e.current=t)(r);let u=!1;e.block&&(e.blocks?e.blocks.forEach((t,n)=>{n!==c&&t&&(Y={r:0,c:[],p:Y},function(t,e,n,l){if(t&&t.o){if(O.has(t))return;O.add(t),Y.c.push(()=>{O.delete(t),l&&(n&&t.d(1),l())}),t.o(e)}}(t,1,1,()=>{e.blocks[n]=null}),Y.r||l(Y.c),Y=Y.p)}):e.block.d(1),s.c(),A(s,1),s.m(e.mount(),e.anchor),u=!0),e.block=s,e.blocks&&(e.blocks[c]=s),u&&P()}if((o=t)&&"object"==typeof o&&"function"==typeof o.then){const n=_();if(t.then(t=>{x(n),c(e.then,1,e.value,t),x(null)},t=>{x(n),c(e.catch,2,e.error,t),x(null)}),e.current!==e.pending)return c(e.pending,0),!0}else{if(e.current!==e.then)return c(e.then,1,e.value,t),!0;e.resolved=t}var o}function z(t,e){-1===t.$$.dirty[0]&&($.push(t),E||(E=!0,T.then(P)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function B(o,i,r,u,a,d,f=[-1]){const p=w;x(o);const g=i.props||{},h=o.$$={fragment:null,ctx:null,props:d,update:t,not_equal:a,bound:n(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(p?p.$$.context:[]),callbacks:n(),dirty:f,skip_bound:!1};let m=!1;if(h.ctx=r?r(o,g,(t,e,...n)=>{const l=n.length?n[0]:e;return h.ctx&&a(h.ctx[t],h.ctx[t]=l)&&(!h.skip_bound&&h.bound[t]&&h.bound[t](l),m&&z(o,t)),e}):[],h.update(),m=!0,l(h.before_update),h.fragment=!!u&&u(h.ctx),i.target){if(i.hydrate){const t=function(t){return Array.from(t.childNodes)}(i.target);h.fragment&&h.fragment.l(t),t.forEach(s)}else h.fragment&&h.fragment.c();i.intro&&A(o.$$.fragment),function(t,n,o){const{fragment:i,on_mount:r,on_destroy:s,after_update:u}=t.$$;i&&i.m(n,o),I(()=>{const n=r.map(e).filter(c);s?s.push(...n):l(n),t.$$.on_mount=[]}),u.forEach(I)}(o,i.target,i.anchor),P()}x(p)}function H(t,e,n){const l=t.slice();return l[56]=e[n],l}function R(t,e,n){const l=t.slice();return l[58]=e[n],l}function M(t,e,n){const l=t.slice();return l[53]=e[n],l[54]=e,l[55]=n,l}function U(t,e,n){const l=t.slice();return l[48]=e[n],l}function G(t,e,n){const l=t.slice();return l[48]=e[n],l}function K(t){let e,n,l,c,o,i,g,h,y=t[6].length+"",v=t[6],b=[];for(let e=0;e<v.length;e+=1)b[e]=Q(H(t,v,e));let k={ctx:t,current:null,token:null,pending:X,then:W,catch:V,value:56};return L(h=t[7],k),{c(){e=a("h2"),e.textContent="Completing sync",n=d("\n    Syncing "),l=d(y),c=d(" items:\n    "),o=a("ol");for(let t=0;t<b.length;t+=1)b[t].c();i=f(),g=p(),k.block.c()},m(t,s){r(t,e,s),r(t,n,s),r(t,l,s),r(t,c,s),r(t,o,s);for(let t=0;t<b.length;t+=1)b[t].m(o,null);r(t,i,s),r(t,g,s),k.block.m(t,k.anchor=s),k.mount=()=>g.parentNode,k.anchor=g},p(e,n){if(t=e,64&n[0]&&y!==(y=t[6].length+"")&&m(l,y),64&n[0]){let e;for(v=t[6],e=0;e<v.length;e+=1){const l=H(t,v,e);b[e]?b[e].p(l,n):(b[e]=Q(l),b[e].c(),b[e].m(o,null))}for(;e<b.length;e+=1)b[e].d(1);b.length=v.length}if(k.ctx=t,128&n[0]&&h!==(h=t[7])&&L(h,k));else{const e=t.slice();e[56]=k.resolved,k.block.p(e,n)}},d(t){t&&s(e),t&&s(n),t&&s(l),t&&s(c),t&&s(o),u(b,t),t&&s(i),t&&s(g),k.block.d(t),k.token=null,k=null}}}function F(t){let e,n,c,o,p,y,b,k,w,x,_,$,S,C,q,T,E,I,j,N,P,D,O,Y,A,L,z,B=t[5],H=[];for(let e=0;e<B.length;e+=1)H[e]=ut(M(t,B,e));return{c(){e=a("h2"),e.textContent="Review sync actions",n=f(),c=a("button"),o=d("Sync "),p=d(t[11]),y=d(" items"),k=d("\n    Â \n    "),w=a("button"),w.textContent="Cancel sync",x=f(),_=a("table"),$=a("tr"),S=a("th"),S.textContent="Source video",C=f(),q=a("th"),q.textContent="Search term",T=f(),E=a("th"),I=f(),j=a("th"),j.textContent="Potential targets",N=f(),P=a("th"),P.textContent="Selected target",D=f(),O=a("th"),Y=a("input"),A=f();for(let t=0;t<H.length;t+=1)H[t].c();c.disabled=b=0===t[11],h(S,"width","33%"),h(S,"class","svelte-16gudsg"),h(q,"width","33%"),h(q,"class","svelte-16gudsg"),h(E,"width","40px"),h(E,"class","svelte-16gudsg"),h(j,"width","305px"),h(j,"class","svelte-16gudsg"),h(P,"width","33%"),h(P,"class","svelte-16gudsg"),h(Y,"type","checkbox"),h(Y,"title","Select all"),h(Y,"class","svelte-16gudsg"),h(O,"width","30px"),h(O,"class","svelte-16gudsg"),h($,"class","svelte-16gudsg"),h(_,"class","sync svelte-16gudsg"),v(_,"width","100%"),v(_,"table-layout","fixed")},m(l,s){r(l,e,s),r(l,n,s),r(l,c,s),i(c,o),i(c,p),i(c,y),r(l,k,s),r(l,w,s),r(l,x,s),r(l,_,s),i(_,$),i($,S),i($,C),i($,q),i($,T),i($,E),i($,I),i($,j),i($,N),i($,P),i($,D),i($,O),i(O,Y),Y.checked=t[8],i(_,A);for(let t=0;t<H.length;t+=1)H[t].m(_,null);L||(z=[g(c,"click",t[20]),g(w,"click",t[23]),g(Y,"change",t[24]),g(Y,"click",t[25])],L=!0)},p(t,e){if(2048&e[0]&&m(p,t[11]),2048&e[0]&&b!==(b=0===t[11])&&(c.disabled=b),256&e[0]&&(Y.checked=t[8]),393248&e[0]){let n;for(B=t[5],n=0;n<B.length;n+=1){const l=M(t,B,n);H[n]?H[n].p(l,e):(H[n]=ut(l),H[n].c(),H[n].m(_,null))}for(;n<H.length;n+=1)H[n].d(1);H.length=B.length}},d(t){t&&s(e),t&&s(n),t&&s(c),t&&s(k),t&&s(w),t&&s(x),t&&s(_),u(H,t),L=!1,l(z)}}}function J(t){let e,n,c,o,u,p,m,y,v,b,k,w,x,_,$,S,C,q,T,E,I,j,N,P,D,O,Y,A,z,B,H,R,M,U,G,K,F,J,Q,V,W,X,Z,tt,et=t[2]&&at(t);function nt(t,e){return t[2]?ft:dt}let lt=nt(t),ct=lt(t),ot=t[1]&&pt(t);function it(t,e){return t[1]?ht:gt}let rt=it(t),st=rt(t),ut={ctx:t,current:null,token:null,pending:wt,then:yt,catch:mt,value:12};L(B=t[12],ut);let vt={ctx:t,current:null,token:null,pending:qt,then:_t,catch:xt,value:13};return L(K=t[13],vt),{c(){e=a("h1"),e.textContent="YouTube To Spotify",n=f(),c=a("p"),c.textContent="This tool synchronizes your YouTube playlists to Spotify playlists,\n      intelligently searching for artist & title based on the YouTube video's\n      name, skipping duplicates and offering the possibility for manual\n      overrides.",o=f(),u=a("p"),u.textContent="This can be useful if you use YouTube for music discovery, add the music\n      videos you like to a playlist and want to ensure that your discovered\n      items are added to Spotify as well which you use for regular music\n      listening.",p=f(),m=a("p"),m.textContent="In order to work, it requires access to your YouTube and Spotify accounts,\n      but it runs entirely in your browser and communicates only with YouTube\n      and Spotify servers and does not store any data at all.",y=f(),v=a("h2"),v.textContent="Step 1: Connect accounts:",b=f(),k=a("p"),w=a("b"),w.textContent="Google:",x=f(),et&&et.c(),_=f(),$=a("button"),ct.c(),S=f(),C=a("p"),q=a("b"),q.textContent="Spotify:",T=f(),ot&&ot.c(),E=f(),I=a("button"),st.c(),j=f(),N=a("h2"),N.textContent="Step 2: Select source and target playlists:",P=f(),D=a("table"),O=a("tr"),Y=a("td"),Y.innerHTML="<b>Source YouTube playlist:</b>",A=f(),z=a("td"),ut.block.c(),H=f(),R=a("tr"),M=a("td"),M.innerHTML="<b>Target Spotify playlist:</b>",U=f(),G=a("td"),vt.block.c(),F=f(),J=a("h2"),J.textContent="Step 3: Sync!",Q=f(),V=a("button"),W=d("Search for items to be synchronized"),h(Y,"class","svelte-16gudsg"),h(z,"class","svelte-16gudsg"),h(O,"class","svelte-16gudsg"),h(M,"class","svelte-16gudsg"),h(G,"class","svelte-16gudsg"),h(R,"class","svelte-16gudsg"),h(D,"class","svelte-16gudsg"),V.disabled=X=!t[10]},m(l,s){r(l,e,s),r(l,n,s),r(l,c,s),r(l,o,s),r(l,u,s),r(l,p,s),r(l,m,s),r(l,y,s),r(l,v,s),r(l,b,s),r(l,k,s),i(k,w),i(k,x),et&&et.m(k,null),i(k,_),i(k,$),ct.m($,null),r(l,S,s),r(l,C,s),i(C,q),i(C,T),ot&&ot.m(C,null),i(C,E),i(C,I),st.m(I,null),r(l,j,s),r(l,N,s),r(l,P,s),r(l,D,s),i(D,O),i(O,Y),i(O,A),i(O,z),ut.block.m(z,ut.anchor=null),ut.mount=()=>z,ut.anchor=null,i(D,H),i(D,R),i(R,M),i(R,U),i(R,G),vt.block.m(G,vt.anchor=null),vt.mount=()=>G,vt.anchor=null,r(l,F,s),r(l,J,s),r(l,Q,s),r(l,V,s),i(V,W),Z||(tt=[g($,"click",t[15]),g(I,"click",t[14]),g(V,"click",t[19])],Z=!0)},p(e,n){if((t=e)[2]?et?et.p(t,n):(et=at(t),et.c(),et.m(k,_)):et&&(et.d(1),et=null),lt!==(lt=nt(t))&&(ct.d(1),ct=lt(t),ct&&(ct.c(),ct.m($,null))),t[1]?ot?ot.p(t,n):(ot=pt(t),ot.c(),ot.m(C,E)):ot&&(ot.d(1),ot=null),rt!==(rt=it(t))&&(st.d(1),st=rt(t),st&&(st.c(),st.m(I,null))),ut.ctx=t,4096&n[0]&&B!==(B=t[12])&&L(B,ut));else{const e=t.slice();e[12]=ut.resolved,ut.block.p(e,n)}if(vt.ctx=t,8192&n[0]&&K!==(K=t[13])&&L(K,vt));else{const e=t.slice();e[13]=vt.resolved,vt.block.p(e,n)}1024&n[0]&&X!==(X=!t[10])&&(V.disabled=X)},d(t){t&&s(e),t&&s(n),t&&s(c),t&&s(o),t&&s(u),t&&s(p),t&&s(m),t&&s(y),t&&s(v),t&&s(b),t&&s(k),et&&et.d(),ct.d(),t&&s(S),t&&s(C),ot&&ot.d(),st.d(),t&&s(j),t&&s(N),t&&s(P),t&&s(D),ut.block.d(),ut.token=null,ut=null,vt.block.d(),vt.token=null,vt=null,t&&s(F),t&&s(J),t&&s(Q),t&&s(V),Z=!1,l(tt)}}}function Q(t){let e,n,l,c,o=t[56].source.snippet.title+"",u=jt(t[56].target)+"";return{c(){e=a("li"),n=d(o),l=d(" â†’ "),c=d(u)},m(t,o){r(t,e,o),i(e,n),i(e,l),i(e,c)},p(t,e){64&e[0]&&o!==(o=t[56].source.snippet.title+"")&&m(n,o),64&e[0]&&u!==(u=jt(t[56].target)+"")&&m(c,u)},d(t){t&&s(e)}}}function V(e){return{c:t,m:t,p:t,d:t}}function W(e){let n,l,c;return{c(){n=a("button"),n.textContent="OK"},m(t,o){r(t,n,o),l||(c=g(n,"click",e[31]),l=!0)},p:t,d(t){t&&s(n),l=!1,c()}}}function X(e){let n;return{c(){n=a("button"),n.textContent="...",n.disabled=!0},m(t,e){r(t,n,e)},p:t,d(t){t&&s(n)}}}function Z(e){return{c:t,m:t,p:t,d:t}}function tt(t){let e;function n(t,e){return t[57].length?nt:et}let l=n(t),c=l(t);return{c(){c.c(),e=p()},m(t,n){c.m(t,n),r(t,e,n)},p(t,o){l===(l=n(t))&&c?c.p(t,o):(c.d(1),c=l(t),c&&(c.c(),c.m(e.parentNode,e)))},d(t){c.d(t),t&&s(e)}}}function et(e){let n;return{c(){n=d("-")},m(t,e){r(t,n,e)},p:t,d(t){t&&s(n)}}}function nt(t){let e,n,c,o=t[57],i=[];for(let e=0;e<o.length;e+=1)i[e]=lt(R(t,o,e));function d(){t[28].call(e,t[54],t[55])}function f(...e){return t[29](t[53],t[54],t[55],...e)}return{c(){e=a("select");for(let t=0;t<i.length;t+=1)i[t].c();h(e,"class","svelte-16gudsg"),void 0===t[53].target&&I(d)},m(l,o){r(l,e,o);for(let t=0;t<i.length;t+=1)i[t].m(e,null);b(e,t[53].target),n||(c=[g(e,"change",d),g(e,"change",f)],n=!0)},p(n,l){if(t=n,32&l[0]){let n;for(o=t[57],n=0;n<o.length;n+=1){const c=R(t,o,n);i[n]?i[n].p(c,l):(i[n]=lt(c),i[n].c(),i[n].m(e,null))}for(;n<i.length;n+=1)i[n].d(1);i.length=o.length}32&l[0]&&b(e,t[53].target)},d(t){t&&s(e),u(i,t),n=!1,l(c)}}}function lt(t){let e,n,l,c,o=jt(t[58])+"";return{c(){e=a("option"),n=d(o),l=f(),e.__value=c=t[58],e.value=e.__value},m(t,c){r(t,e,c),i(e,n),i(e,l)},p(t,l){32&l[0]&&o!==(o=jt(t[58])+"")&&m(n,o),32&l[0]&&c!==(c=t[58])&&(e.__value=c,e.value=e.__value)},d(t){t&&s(e)}}}function ct(e){let n;return{c(){n=d("...")},m(t,e){r(t,n,e)},p:t,d(t){t&&s(n)}}}function ot(e){return{c:t,m:t,p:t,d:t}}function it(t){let e,n=t[56]&&rt(t);return{c(){n&&n.c(),e=p()},m(t,l){n&&n.m(t,l),r(t,e,l)},p(t,l){t[56]?n?n.p(t,l):(n=rt(t),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},d(t){n&&n.d(t),t&&s(e)}}}function rt(t){let e,n,l,c,o=jt(t[56])+"";return{c(){e=a("a"),n=d(o),h(e,"href",l=t[56].external_urls.spotify),h(e,"title",c=jt(t[56]))},m(t,l){r(t,e,l),i(e,n)},p(t,i){32&i[0]&&o!==(o=jt(t[56])+"")&&m(n,o),32&i[0]&&l!==(l=t[56].external_urls.spotify)&&h(e,"href",l),32&i[0]&&c!==(c=jt(t[56]))&&h(e,"title",c)},d(t){t&&s(e)}}}function st(e){let n;return{c(){n=d("...")},m(t,e){r(t,n,e)},p:t,d(t){t&&s(n)}}}function ut(t){let e,n,c,o,u,p,b,k,w,x,_,$,S,C,q,T,E,I,j,N,P,D,O,Y,A,z=t[53].source.snippet.title+"";function B(){t[26].call(w,t[54],t[55])}function H(...e){return t[27](t[53],t[54],t[55],...e)}let R={ctx:t,current:null,token:null,pending:ct,then:tt,catch:Z,value:57};L(q=t[53].candidates,R);let M={ctx:t,current:null,token:null,pending:st,then:it,catch:ot,value:56};function U(){t[30].call(P,t[54],t[55])}return L(I=t[53].target,M),{c(){e=a("tr"),n=a("td"),c=a("a"),o=d(z),b=f(),k=a("td"),w=a("input"),x=f(),_=a("td"),$=a("button"),$.textContent="ðŸ”Ž",S=f(),C=a("td"),R.block.c(),T=f(),E=a("td"),M.block.c(),j=f(),N=a("td"),P=a("input"),O=f(),h(c,"href",u="https://www.youtube.com/watch?v="+t[53].source.contentDetails.videoId),h(c,"title",p=t[53].source.snippet.title),h(n,"class","svelte-16gudsg"),h(w,"type","text"),v(w,"width","100%"),h(w,"class","svelte-16gudsg"),h(k,"class","svelte-16gudsg"),h(_,"class","svelte-16gudsg"),h(C,"class","svelte-16gudsg"),h(E,"class","svelte-16gudsg"),h(P,"type","checkbox"),P.disabled=D=t[18](t[53].target),h(P,"class","svelte-16gudsg"),v(N,"text-align","center"),h(N,"class","svelte-16gudsg"),h(e,"class","svelte-16gudsg")},m(l,s){r(l,e,s),i(e,n),i(n,c),i(c,o),i(e,b),i(e,k),i(k,w),y(w,t[53].query),i(e,x),i(e,_),i(_,$),i(e,S),i(e,C),R.block.m(C,R.anchor=null),R.mount=()=>C,R.anchor=null,i(e,T),i(e,E),M.block.m(E,M.anchor=null),M.mount=()=>E,M.anchor=null,i(e,j),i(e,N),i(N,P),P.checked=t[53].selected,i(e,O),Y||(A=[g(w,"input",B),g($,"click",H),g(P,"change",U)],Y=!0)},p(e,n){if(t=e,32&n[0]&&z!==(z=t[53].source.snippet.title+"")&&m(o,z),32&n[0]&&u!==(u="https://www.youtube.com/watch?v="+t[53].source.contentDetails.videoId)&&h(c,"href",u),32&n[0]&&p!==(p=t[53].source.snippet.title)&&h(c,"title",p),32&n[0]&&w.value!==t[53].query&&y(w,t[53].query),R.ctx=t,32&n[0]&&q!==(q=t[53].candidates)&&L(q,R));else{const e=t.slice();e[57]=R.resolved,R.block.p(e,n)}if(M.ctx=t,32&n[0]&&I!==(I=t[53].target)&&L(I,M));else{const e=t.slice();e[56]=M.resolved,M.block.p(e,n)}32&n[0]&&D!==(D=t[18](t[53].target))&&(P.disabled=D),32&n[0]&&(P.checked=t[53].selected)},d(t){t&&s(e),R.block.d(),R.token=null,R=null,M.block.d(),M.token=null,M=null,Y=!1,l(A)}}}function at(t){let e,n,l=t[0].getBasicProfile().getName()+"";return{c(){e=d("Signed in as "),n=d(l)},m(t,l){r(t,e,l),r(t,n,l)},p(t,e){1&e[0]&&l!==(l=t[0].getBasicProfile().getName()+"")&&m(n,l)},d(t){t&&s(e),t&&s(n)}}}function dt(t){let e;return{c(){e=d("Sign in")},m(t,n){r(t,e,n)},d(t){t&&s(e)}}}function ft(t){let e;return{c(){e=d("Sign out")},m(t,n){r(t,e,n)},d(t){t&&s(e)}}}function pt(t){let e,n,l=t[1].display_name+"";return{c(){e=d("Signed in as "),n=d(l)},m(t,l){r(t,e,l),r(t,n,l)},p(t,e){2&e[0]&&l!==(l=t[1].display_name+"")&&m(n,l)},d(t){t&&s(e),t&&s(n)}}}function gt(t){let e;return{c(){e=d("Sign in")},m(t,n){r(t,e,n)},d(t){t&&s(e)}}}function ht(t){let e;return{c(){e=d("Sign out")},m(t,n){r(t,e,n)},d(t){t&&s(e)}}}function mt(e){return{c:t,m:t,p:t,d:t}}function yt(t){let e;function n(t,e){return t[12].length?bt:vt}let l=n(t),c=l(t);return{c(){c.c(),e=p()},m(t,n){c.m(t,n),r(t,e,n)},p(t,o){l===(l=n(t))&&c?c.p(t,o):(c.d(1),c=l(t),c&&(c.c(),c.m(e.parentNode,e)))},d(t){c.d(t),t&&s(e)}}}function vt(e){let n;return{c(){n=d("...")},m(t,e){r(t,n,e)},p:t,d(t){t&&s(n)}}}function bt(t){let e,n,l,c=t[12],o=[];for(let e=0;e<c.length;e+=1)o[e]=kt(G(t,c,e));return{c(){e=a("select");for(let t=0;t<o.length;t+=1)o[t].c();h(e,"class","svelte-16gudsg"),void 0===t[3]&&I(()=>t[21].call(e))},m(c,i){r(c,e,i);for(let t=0;t<o.length;t+=1)o[t].m(e,null);b(e,t[3]),n||(l=g(e,"change",t[21]),n=!0)},p(t,n){if(4096&n[0]){let l;for(c=t[12],l=0;l<c.length;l+=1){const i=G(t,c,l);o[l]?o[l].p(i,n):(o[l]=kt(i),o[l].c(),o[l].m(e,null))}for(;l<o.length;l+=1)o[l].d(1);o.length=c.length}4104&n[0]&&b(e,t[3])},d(t){t&&s(e),u(o,t),n=!1,l()}}}function kt(t){let e,n,l,c,o,u,f=t[48].snippet.title+"",p=t[48].contentDetails.itemCount+"";return{c(){e=a("option"),n=d(f),l=d(" ("),c=d(p),o=d("\n                    items)\n                  "),e.__value=u=t[48],e.value=e.__value},m(t,s){r(t,e,s),i(e,n),i(e,l),i(e,c),i(e,o)},p(t,l){4096&l[0]&&f!==(f=t[48].snippet.title+"")&&m(n,f),4096&l[0]&&p!==(p=t[48].contentDetails.itemCount+"")&&m(c,p),4096&l[0]&&u!==(u=t[48])&&(e.__value=u,e.value=e.__value)},d(t){t&&s(e)}}}function wt(e){let n;return{c(){n=d("...")},m(t,e){r(t,n,e)},p:t,d(t){t&&s(n)}}}function xt(e){return{c:t,m:t,p:t,d:t}}function _t(t){let e;function n(t,e){return t[13].length?St:$t}let l=n(t),c=l(t);return{c(){c.c(),e=p()},m(t,n){c.m(t,n),r(t,e,n)},p(t,o){l===(l=n(t))&&c?c.p(t,o):(c.d(1),c=l(t),c&&(c.c(),c.m(e.parentNode,e)))},d(t){c.d(t),t&&s(e)}}}function $t(e){let n;return{c(){n=d("...")},m(t,e){r(t,n,e)},p:t,d(t){t&&s(n)}}}function St(t){let e,n,l,c=t[13],o=[];for(let e=0;e<c.length;e+=1)o[e]=Ct(U(t,c,e));return{c(){e=a("select");for(let t=0;t<o.length;t+=1)o[t].c();h(e,"class","svelte-16gudsg"),void 0===t[4]&&I(()=>t[22].call(e))},m(c,i){r(c,e,i);for(let t=0;t<o.length;t+=1)o[t].m(e,null);b(e,t[4]),n||(l=g(e,"change",t[22]),n=!0)},p(t,n){if(8192&n[0]){let l;for(c=t[13],l=0;l<c.length;l+=1){const i=U(t,c,l);o[l]?o[l].p(i,n):(o[l]=Ct(i),o[l].c(),o[l].m(e,null))}for(;l<o.length;l+=1)o[l].d(1);o.length=c.length}8208&n[0]&&b(e,t[4])},d(t){t&&s(e),u(o,t),n=!1,l()}}}function Ct(t){let e,n,l,c,o,u,f=t[48].name+"",p=t[48].tracks.total+"";return{c(){e=a("option"),n=d(f),l=d(" ("),c=d(p),o=d(" items)\n                  "),e.__value=u=t[48],e.value=e.__value},m(t,s){r(t,e,s),i(e,n),i(e,l),i(e,c),i(e,o)},p(t,l){8192&l[0]&&f!==(f=t[48].name+"")&&m(n,f),8192&l[0]&&p!==(p=t[48].tracks.total+"")&&m(c,p),8192&l[0]&&u!==(u=t[48])&&(e.__value=u,e.value=e.__value)},d(t){t&&s(e)}}}function qt(e){let n;return{c(){n=d("...")},m(t,e){r(t,n,e)},p:t,d(t){t&&s(n)}}}function Tt(e){let n;function l(t,e){return t[5].length?t[6].length?K:F:J}let c=l(e),o=c(e);return{c(){n=a("main"),o.c()},m(t,e){r(t,n,e),o.m(n,null)},p(t,e){c===(c=l(t))&&o?o.p(t,e):(o.d(1),o=c(t),o&&(o.c(),o.m(n,null)))},i:t,o:t,d(t){t&&s(n),o.d()}}}const Et="yt2sp",It="https://www.googleapis.com/auth/youtube.readonly";function jt(t){return t?t.artists.map(t=>t.name).join(", ")+"-"+t.name+" ("+t.album.name+", "+t.album.release_date+")":"..."}function Nt(t,e,n){const l=window.location.href.slice(0,-1);var c,o,i,r,s,u,a,d,f=[],p=[],g=[],h=[],m=!1,y=localStorage.getItem("spotify_token");window.spotifyCallback=t=>{c.close(),y=t,localStorage.setItem("spotify_token",y||""),x()};var v,b=new URL(window.location.href.replace("#","?"));function w(t,e){var n={Authorization:"Bearer "+y};return e?fetch(t,{headers:n,method:"POST",body:JSON.stringify(e)}):fetch(t,{headers:n})}async function x(){var t=await w("https://api.spotify.com/v1/me");t.ok?n(1,r=await t.json()):(y=void 0,n(1,r=void 0),localStorage.removeItem("spotify_token"))}function $(){gapi.client.init({apiKey:void 0,clientId:void 0,discoveryDocs:["https://www.googleapis.com/discovery/v1/apis/youtube/v3/rest"],scope:It}).then((function(){(o=gapi.auth2.getAuthInstance()).isSignedIn.listen(S);o.currentUser.get();S()}))}function S(t){n(0,i=o.currentUser.get()),n(2,s=i.hasGrantedScopes(It))}async function C(t){if(!t)return[];var e,n=[];do{var l=await w(e||"https://api.spotify.com/v1/me/playlists?limit=50").then(t=>t.json());n=n.concat(l.items),e=l.next}while(e);return n}b.searchParams.get("state")==Et&&window.opener.spotifyCallback(b.searchParams.get("access_token")),y&&x(),v=()=>{!function(t,e,n){let l=t.length;function c(){l=--l,l<1&&n()}e()?n():t.forEach(({type:t,url:e,options:n={async:!0,defer:!0}})=>{const l="script"===t,o=document.createElement(l?"script":"link");l?(o.src=e,o.async=n.async,o.defer=n.defer):(o.rel="stylesheet",o.href=e),o.onload=c,document.body.appendChild(o)})}([{type:"script",url:"//apis.google.com/js/api.js"}],()=>window.gapi,()=>gapi.load("client:auth2",$))},_().$$.on_mount.push(v);class q{constructor(t){this.source=t,this.query=this.source.snippet.title,this.candidates=[],this.target=null,this.selected=!1}}async function T(t){var e=await w(`https://api.spotify.com/v1/search?q=${t}&type=artist,track`);return(e=await e.json()).tracks.items}function E(t){return!(!t||!p.length)&&p.find(e=>e.track.id==t.id)}let I,j,N,P,D;return t.$$.update=()=>{2&t.$$.dirty[0]&&n(9,I=r&&r.id),4&t.$$.dirty[0]&&n(12,j=async function(t){if(!s)return[];var e,n=[];do{var l=await gapi.client.youtube.playlists.list({part:["id,snippet,contentDetails"],maxResults:50,mine:!0,pageToken:e});n=n.concat(l.result.items),e=l.result.nextPageToken||null}while(e);return n}()),512&t.$$.dirty[0]&&n(13,N=C(I)),540&t.$$.dirty[0]&&n(10,P=u&&a&&I&&s),32&t.$$.dirty[0]&&n(11,D=g.filter(t=>t.selected).filter(t=>!E(t.target)).length)},[i,r,s,u,a,g,h,d,m,I,P,D,j,N,function(){var t=`https://accounts.spotify.com/authorize?client_id=undefined&redirect_uri=${l}&scope=user-read-private user-read-email playlist-read-private playlist-modify-private&response_type=token&state=yt2sp`;r&&(t+="&show_dialog=true"),c=window.open(t,"Login with Spotify","width=800,height=600")},function(){o.isSignedIn.get()?o.signOut():o.signIn()},C,T,E,async function(){await async function(){var t;f=[];do{var e=await gapi.client.youtube.playlistItems.list({part:["snippet,contentDetails"],maxResults:50,playlistId:u.id,pageToken:t});f=f.concat(e.result.items),t=e.result.nextPageToken||null}while(t)}(),await async function(){var t;p=[];do{var e=await w(t||a.tracks.href+"?limit=50").then(t=>t.json());p=p.concat(e.items),t=e.next}while(t)}(),n(5,g=[]),f.forEach(t=>{n(5,g=[...g,new q(t)])}),g.forEach(async(t,e)=>{t.candidates=await T(t.query),t.candidates.length||(t.query=t.query.replace(/ *[\[\(\{][^)]*[\)\]\}] */g,"").replace(/ *(HD|HQ|720p|1080p|4k) */g,"").replace(/ *(of+icial *)?(music *)?video/g,""),t.candidates=await T(t.query)),t.candidates.length||(t.query=t.query.replace(/lyrics?/gi,"").replace(/(feat|ft|featuring)\..*$/gi,"").replace(/with.*$/gi,""),t.candidates=await T(t.query)),t.candidates.length||(t.query=t.query.split("-")[1]||t.query.split("-")[0],t.candidates=await T(t.query)),t.target=t.candidates[0],t.selected=t.target&&!E(t.target),n(5,g[e]=t,g)})},function(){n(6,h=g.filter(t=>t.selected)),h.length&&n(7,d=w(a.tracks.href,{uris:h.map(t=>t.target.uri)}))},function(){u=k(this),n(3,u),n(12,j),n(2,s)},function(){a=k(this),n(4,a),n(13,N),n(9,I),n(1,r)},()=>n(5,g=[]),function(){m=this.checked,n(8,m)},()=>{n(5,g=g.map(t=>(t.selected=!m&&!E(t.target),t)))},function(t,e){t[e].query=this.value,n(5,g)},async(t,e,l)=>{n(5,e[l].candidates=await T(t.query),g),n(5,e[l].target=t.candidates[0],g),n(5,e[l].selected=t.target&&!E(t.target),g)},function(t,e){t[e].target=k(this),n(5,g)},(t,e,l)=>{n(5,e[l].selected=!E(t.target),g)},function(t,e){t[e].selected=this.checked,n(5,g)},()=>{n(5,g=[]),n(6,h=[]),n(13,N=C(I))}]}return new class extends class{$destroy(){!function(t,e){const n=t.$$;null!==n.fragment&&(l(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}{constructor(t){super(),B(this,t,Nt,Tt,o,{},[-1,-1,-1])}}({target:document.body})}();
//# sourceMappingURL=bundle.js.map
